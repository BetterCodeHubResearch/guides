<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Run your own gem server - RubyGems Guides</title>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta http-equiv="Description" name="Description" content="Tutorials, guides, FAQs for RubyGems package management" />
    <meta http-equiv="Keywords" name="Keywords" content="rubygems, gems, programming, ruby, packages" />
    <script src="//use.typekit.net/lkc4mmu.js" type="text/javascript"></script>
    <script>
      try{Typekit.load();}catch(e){}
    </script>
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script>
      $(function() {
        var path = window.location.pathname;
        $('a[href="'+path.substring(0, path.length -1)+'"]').addClass('is-active');
      });
    </script>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport">
    <link href="/stylesheets/application.css" rel="stylesheet" type="text/css" />
    <!--[if !IE]>-->
      <meta name="viewport" content="width=device-width">
      <script type="text/javascript">
        window.scrollTo(0, 1);
      </script>
    <!--<![endif]-->
  </head>

  <body class="default">
    <header class="header header--interior">
      <div class="l-wrap--header">
        <a class="header__logo-wrap" href="/">
          <span class="header__logo" data-icon="⬡">⬢</span>
          <span class="t-hidden">RubyGems</span>
        </a>
        <a class="header__club-sandwich" href="#">
          <span class="t-hidden">Navigation menu</span>
        </a>

        <div class="header__nav-links-wrap">
          <form class="header__search-wrap">
            <input class="header__search" id="header__search" name="header__search" placeholder="Search Gems..." type="search">
            <label class="header__search__icon" data-icon="⌕" for="header__search">
              <span class="t-hidden">Search gems</span>
            </label>
          </form>

          <nav class="header__nav-links">
            <a class="header__nav-link" href="/gems">Gems</a>
            <a class="header__nav-link" href="/guides">Guides</a>
            <a class="header__nav-link" href="/contribute">Contribute</a>
            <a class="header__nav-link" href="#" id="js-sign-in-trigger">Sign In</a>
            <a class="header__nav-link js-sign-up-trigger" href="#">Sign Up</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="main--interior">
      <div class="l-wrap--b">
        <a class="t-display page__heading" href="/">Guides</a>
        <div class="l-overflow">
          <div class="l-col--l">
            <div class="nav--v">
              <a class="nav--v__link" href="/rubygems-basics">RubyGems Basics</a>
              <a class="nav--v__link" href="/what-is-a-gem">What is a gem?</a>
              <a class="nav--v__link" href="/make-your-own-gem">Make your own gem</a>
              <a class="nav--v__link" href="/gems-with-extensions">Gems with Extensions</a>
              <a class="nav--v__link" href="/name-your-gem">Name your gem</a>
              <a class="nav--v__link" href="/publishing">Publishing your gem</a>
              <a class="nav--v__link" href="/security">Security Practices</a>
              <a class="nav--v__link" href="/patterns">Patterns</a>
              <a class="nav--v__link" href="/specification-reference">Specification Reference</a>
              <a class="nav--v__link" href="/command-reference">Command Reference</a>
              <a class="nav--v__link" href="http://docs.seattlerb.org/rubygems">RubyGems API</a>
              <a class="nav--v__link" href="/rubygems-org-api">RubyGems.org API</a>
              <a class="nav--v__link" href="/run-your-own-gem-server">Run your own gem server</a>
              <a class="nav--v__link" href="/resources">Resources</a>
              <a class="nav--v__link" href="/contributing">Contributing to RubyGems</a>
              <a class="nav--v__link" href="/faqs">Frequently Asked Questions</a>
              <a class="nav--v__link" href="/plugins">Plugins</a>
              <a class="nav--v__link" href="/credits">Credits</a>
            </div>
          </div>
          <div class="l-colspan--r">
            <div class="t-body">
              <p><em class="t-gray">Need to serve gems locally or for your organization?</em></p>

<!-- TODO: make a layout for this -->
<style type="text/css">
  #container {
    max-width: 920px;
  }
</style>

<p>There are times you would like to run your own gem server.  You may want to
share gems with colleagues when you are both without internet connectivity. You
may have private code, internal to your organization, that you’d like to
distribute and manage as gems without making the source publicly available.</p>

<p>There are a few options to set up a server to host gems from within your
organization. This guide covers the <code>gem server</code> command and the <a href="https://github.com/geminabox/geminabox">Gem in a
Box</a> project. It also discusses how to
use these servers as gem sources during development.</p>

<h2 id="running-the-built-in-gem-server">Running the built-in gem server</h2>

<p>When you install RubyGems, it adds the <code>gem server</code> command to your system.
This is the fastest way to start hosting gems. Just run the command:</p>

<pre><code>gem server
</code></pre>

<p>This will serve all your installed gems from your local machine at
<a href="http://localhost:8808">http://localhost:8808</a>. If you visit this url in your
browser, you’ll find that the <code>gem server</code> command provides an HTML
documentation index.</p>

<p>When you install new gems, they are automatically available through the
built-in gem server.</p>

<p>For a complete list of options, run:</p>

<pre><code>gem server --help
</code></pre>

<p>Among other options, you can change the port that gems are served on and
specify the directories to search for installed gems.</p>

<h2 id="running-gem-in-a-box">Running Gem in a Box</h2>

<p>For a server with more features, including the ability to push gems, try out
the <a href="https://github.com/geminabox/geminabox">Gem in a Box</a> project.</p>

<p>To get started, install <code>geminabox</code>:</p>

<pre><code>[~/dev/geminabox] gem install geminabox
</code></pre>

<p>Make a data directory for storing gems:</p>

<pre><code>[~/dev/geminabox] mkdir data
</code></pre>

<p>Include the following in a <code>config.ru</code> file:</p>

<pre><code>[~/dev/geminabox] cat config.ru
require "rubygems"
require "geminabox"

Geminabox.data = "./data"
run Geminabox::Server
</code></pre>

<p>And run the server:</p>

<pre><code>[~/dev/geminabox] rackup
[2011-05-19 12:09:40] INFO  WEBrick 1.3.1
[2011-05-19 12:09:40] INFO  ruby 1.9.2 (2011-02-18) [x86_64-darwin10.5.0]
[2011-05-19 12:09:40] INFO  WEBrick::HTTPServer#start: pid=60941 port=9292
</code></pre>

<p>Now you can push gems using the <code>gem inabox</code> command.  The first time you do
this, you’ll be prompted for the location of your gem server.</p>

<pre><code>[~/dev/secretgem] gem build secretgem.gemspec
  Successfully built RubyGem
  Name: secretgem
  Version: 0.0.1
  File: secretgem-0.0.1.gem
[~/dev/secretgem] gem inabox ./secretgem-0.0.1.gem
Enter the root url for your personal geminabox instance. (E.g. http://gems/)
Host:  http://localhost:9292
Pushing secretgem-0.0.1.gem to http://localhost:9292/...
</code></pre>

<p>There is a web interface available on
<a href="http://localhost:9292">http://localhost:9292</a> as well.  For more information,
read the <a href="https://github.com/geminabox/geminabox">Gem in a box</a> README.</p>

<h2 id="using-gems-from-your-server">Using gems from your server</h2>

<p>Whether you use <code>gem server</code>, Gem in a Box, or another gem server, you can
configure RubyGems to use your local or internal source alongside other sources
such as <a href="http://rubygems.org">http://rubygems.org</a>.</p>

<p>Use the <code>gem sources</code> command to add the gem server to your system-wide gem
sources.  The following URL is the default for running Gem in a Box via
<code>rackup</code>:</p>

<pre><code>gem sources --add http://localhost:9292
</code></pre>

<p>Then install gems as usual:</p>

<pre><code>[~] gem install secretgem
Successfully installed secretgem-0.0.1
1 gem installed
</code></pre>

<p>If you’re using <a href="http://bundler.io">Bundler</a> then you can specify this
server as a gem source in your <code>Gemfile</code>:</p>

<pre><code>[~/dev/myapp] cat Gemfile
source "http://localhost:9292"
gem "secretgem"

[~/dev/myapp] bundle
Using secretgem (0.0.1)
Using bundler (1.0.13)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
</code></pre>

            </div>
          </div>
        </div>

        <div class="paginated-nav-links">
          <a class="paginated-nav-link--prev" data-icon="&lt;" href="/rubygems-org-api">
            <span>Previous</span>
          </a>
          <a class="paginated-nav-link--next" data-icon="&gt;" href="/resources">
            <span>Next</span>
          </a>
        </div>
      </div>
    </main>

    <div class="modal-wrap" id="js-sign-in-modal">
      <form class="modal--sign-in">
        <a class="modal__close" data-icon="x" href="#" id="js-sign-in-close">
          <span class="t-hidden">Close modal</span>
        </a>
        <div class="modal__input-wrap">
          <label class="modal__label t-hidden" for="email">Email or Username</label>
          <input class="modal__input" id="email" name="email" placeholder="Email or Username" type="text">
        </div>
        <div class="modal__input-wrap">
          <label class="modal__label t-hidden" for="password">Password</label>
          <input class="modal__input" id="password" name="password" placeholder="Password" type="password">
        </div>
        <button class="modal__submit" data-icon="&gt;" type="submit">Sign in</button>
      </form>
    </div>

    <div class="modal-wrap" id="js-sign-up-modal">
      <form class="modal--sign-up">
        <a class="modal__close" data-icon="x" href="#" id="js-sign-up-close">
          <span class="t-hidden">Close modal</span>
        </a>
        <div class="modal__input-wrap">
          <label class="modal__label t-hidden" for="email">Email</label>
          <input class="modal__input" id="email" name="email" placeholder="Email" type="email">
        </div>
        <div class="modal__input-wrap">
          <label class="modal__label t-hidden" for="username">Username</label>
          <input class="modal__input" id="username" name="username" placeholder="Username" type="text">
        </div>
        <div class="modal__input-wrap">
          <label class="modal__label t-hidden" for="password">Password</label>
          <input class="modal__input" id="password" name="password" placeholder="Password" type="password">
        </div>
        <button class="modal__submit" data-icon="&gt;" type="submit">Sign up</button>
      </form>
    </div>

    <footer class="footer">
      <div class="l-wrap--footer">
        <div class="l-overflow">
          <div class="nav--v l-col--r--pad">
            <a class="nav--v__link--footer" href="/status">Status</a>
            <a class="nav--v__link--footer" href="/uptime">Uptime</a>
            <a class="nav--v__link--footer" href="https://github.com/rubygems/rubygems.org" target='_blank'>Code</a>
            <a class="nav--v__link--footer" href="https://groups.google.com/forum/#!forum/rubygems-org" target='_blank'>Discuss</a>
            <a class="nav--v__link--footer" href="/stats">Stats</a>
            <a class="nav--v__link--footer" href="/blogs">Blog</a>
            <a class="nav--v__link--footer" href="/about">About</a>
            <a class="nav--v__link--footer" href="/help">Help</a>
          </div>
          <div class="l-colspan--l colspan--l--has-border">
            <p class="footer__about">RubyGems.org is the Ruby community&rsquo;s gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.</p>
          </div>
        </div>
      </div>
      <div class="footer__sponsors-wrap">
        <div class="footer__sponsors">
          <a class="footer__sponsor" href="http://rubycentral.org/" target="_blank">
            Supported by
            <img alt="Ruby Central" class="footer__sponsor__logo" src="/images/logos/ruby-central.png">
          </a>
          <a class="footer__sponsor" href="https://www.bluebox.net/" target="_blank">
            Hosted by
            <img alt="Blue Box" class="footer__sponsor__logo" src="/images/logos/bluebox.png">
          </a>
          <a class="footer__sponsor" href="http://www.dockyard.com/" target="_blank">
            Designed by
            <img alt="DockYard" class="footer__sponsor__logo" src="/images/logos/dockyard.png">
          </a>
          <a class="footer__sponsor" href="https://dnsimple.com/" target="_blank">
            Resolved with
            <img alt="DNSimple" class="footer__sponsor__logo" src="/images/logos/dnsimple.png">
          </a>
          <a class="footer__sponsor" href="http://newrelic.com/" target="_blank">
            Optimized by
            <img alt="New Relic" class="footer__sponsor__logo" src="/images/logos/new-relic.png">
          </a>
          <a class="footer__sponsor" href="http://get.gaug.es/" target="_blank">
            Tracking by
            <img alt="Gauges" class="footer__sponsor__logo" src="/images/logos/gauges.png">
          </a>
          <a class="footer__sponsor" href="https://www.runscope.com/" target="_blank">
            Monitored by
            <img alt="Runscope" class="footer__sponsor__logo" src="/images/logos/runscope.png">
          </a>
        </div>
      </div>
    </footer>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-10315684-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
